# BrightEd Environment Configuration Template
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:4000
NEXT_PUBLIC_THEME_COLOR=#0EA5E9

# =============================================================================
# FIREBASE CONFIGURATION
# =============================================================================
# Client-side Firebase config (safe for public)
NEXT_PUBLIC_FIREBASE_API_KEY=your-firebase-api-key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your-sender-id
NEXT_PUBLIC_FIREBASE_APP_ID=your-app-id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your-measurement-id
NEXT_PUBLIC_FIREBASE_DATABASE_URL=https://your-project-id-default-rtdb.firebaseio.com

# Server-side Firebase Admin SDK (NEVER expose to client)
# Prefer storing the service account JSON as base64 or raw JSON
FIREBASE_ADMIN_SERVICE_ACCOUNT_JSON={"type":"service_account"}
FIREBASE_ADMIN_SERVICE_ACCOUNT_BASE64=base64-encoded-service-account
# OR use path to service account file (absolute or relative to repo root)
FIREBASE_ADMIN_SERVICE_ACCOUNT_PATH=/path/to/service-account.json
# Optional fallback path used by Google SDKs
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# Generate strong random strings for these (min 32 characters)
NEXTAUTH_SECRET=generate-a-strong-random-secret-min-32-chars
NEXTAUTH_URL=http://localhost:4000

# Session configuration
SESSION_SECRET=another-strong-random-secret-min-32-chars
SESSION_COOKIE_NAME=brighted-session
SESSION_MAX_AGE=1800

# CSRF Protection
CSRF_SECRET=csrf-secret-token-min-32-characters-long
CSRF_COOKIE_NAME=brighted-csrf

# Rate Limiting
RATE_LIMIT_SECRET=rate-limit-secret-min-32-characters
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=5

# =============================================================================
# ENCRYPTION KEYS
# =============================================================================
# For encrypting sensitive data at rest
ENCRYPTION_KEY=your-32-character-encryption-key
ENCRYPTION_IV=your-16-char-iv

# =============================================================================
# API KEYS & THIRD-PARTY SERVICES (Server-side only)
# =============================================================================
# OpenAI / AI Services
OPENAI_API_KEY=sk-your-openai-key

# Analytics (Public key can be exposed to client)
NEXT_PUBLIC_ENABLE_POSTHOG=false
NEXT_PUBLIC_POSTHOG_KEY=your-posthog-key
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# Cloudinary (server-side + public cloud name)
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-cloudinary-api-key
CLOUDINARY_API_SECRET=your-cloudinary-api-secret

# Monitoring & Error Tracking
SENTRY_DSN=https://your-sentry-dsn
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# =============================================================================
# SECURITY HEADERS & CSP
# =============================================================================
# Nonce generation secret for CSP
CSP_NONCE_SECRET=your-csp-nonce-secret-min-32-chars

# Allowed domains for CSP (comma-separated)
CSP_ALLOWED_DOMAINS=res.cloudinary.com,firebasestorage.googleapis.com,api.dicebear.com

# =============================================================================
# DATABASE SECURITY
# =============================================================================
# Connection pooling and security settings
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_POOL_SIZE=10
DATABASE_SSL_MODE=require

# =============================================================================
# AUDIT LOGGING
# =============================================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_RETENTION_DAYS=90

# =============================================================================
# FEATURE FLAGS & DEBUG (Keep disabled in production)
# =============================================================================
DEBUG_MODE=false
ENABLE_VERBOSE_LOGGING=false
SKIP_RATE_LIMITING=false

# =============================================================================
# DEPLOYMENT & INFRASTRUCTURE
# =============================================================================
# Fly.io specific (if using Fly)
FLY_APP_NAME=brighted
FLY_REGION=syd
FLY_ALLOC_ID=your-alloc-id

# Docker/Container settings
CONTAINER_MAX_MEMORY=512m
CONTAINER_CPU_LIMIT=1.0
